extends Spatial


# Declare member variables here. Examples:
# var a = 2
# var b = "text"
var ATTITUDE = .01
var MAIN = .05
var move_inertia = Vector3()
var spin_inertia = Vector3()
var forward = 0
var up = 0
var left = 0
signal direction_change(forward, up, left)
# Called when the node enters the scene tree for the first time.
func _ready():
	move_inertia = Vector3()
	spin_inertia = Vector3()

# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	inputfunc(delta)
	normals()
	move(delta)
	emit_signal("direction_change",forward, up, left)

func inputfunc(_delta):
	if Input.is_action_pressed("Fore"):
		move_inertia.x -= ATTITUDE
		forward+=1
	if Input.is_action_pressed("Aft"):
		move_inertia.x += ATTITUDE
		forward-=1
	if Input.is_action_pressed("Dorsal"):
		move_inertia.y += ATTITUDE
		up+=1
	if Input.is_action_pressed("Ventral"):
		move_inertia.y -= ATTITUDE
		up-=1
	if Input.is_action_pressed("Port"):
		move_inertia.z += ATTITUDE
		left+=1
	if Input.is_action_pressed("Starboard"):
		move_inertia.z -= ATTITUDE
		left-=1
	if Input.is_action_pressed("Turn_Dorsal"):
		spin_inertia.z -= ATTITUDE
	if Input.is_action_pressed("Turn_Ventral"):
		spin_inertia.z += ATTITUDE
	if Input.is_action_pressed("Turn_Port"):
		spin_inertia.y += ATTITUDE
	if Input.is_action_pressed("Turn_Starboard"):
		spin_inertia.y -= ATTITUDE
	if Input.is_action_pressed("Turn_Clockwise"):
		spin_inertia.x -= ATTITUDE
	if Input.is_action_pressed("Turn_Counter_Clockwise"):
		spin_inertia.x += ATTITUDE

func normals():
	spin_inertia = spin_inertia.normalized()

func move(_delta):
	translate_object_local(move_inertia)
	#rotate_object_local(spin_inertia, deg2rad(1))
	#rotate_object_local(Vector3((spin_inertia.x),0,0), deg2rad(.1))
	#rotate_object_local(Vector3(0,spin_inertia.y,0), deg2rad(.1))
	#rotate_object_local(Vector3(0,0,spin_inertia.z), deg2rad(.1))
